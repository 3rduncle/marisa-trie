#summary ベンチマーク
#labels Featured

= ベンチマーク =

いくつかのキー集合に対して，`marisa-benchmark` を実行してみました．実行環境は以下のとおりです．

|| *CPU*        || Core 2 Duo U9600 1.60GHz    ||
|| *OS*         || 64-bit Ubuntu Desktop 10.04 ||
|| *コンパイラ* || gcc version 4.4.3           ||

 * version: 0.1.0

<wiki:toc max_depth="2" />

----

== 日本語版 Wikipedia タイトル ==

{{{
$ gzip -cd jawiki-20101102-all-titles-in-ns0.gz | head -10000 | tail -5
2006年の日本
2006年の日本グランプリ_(ロードレース)
2006年の日本シリーズ
2006年の日本プロ野球
2006年の日本公開映画

$ gzip -cd jawiki-20101102-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 1146584
total length: 23809474
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1564294   9850414  300.15  779.99  712.16  666.62  619.78  587.99
     2   2087639   7056713  274.96  408.04  388.67  372.27  358.31  346.40
     3   2264302   6522559  264.19  361.70  338.23  324.81  315.00  304.94
     4   2340155   6348953  262.98  350.64  326.66  314.13  305.76  295.51
     5   2380365   6275198  260.59  344.32  322.07  310.73  302.53  292.50
     6   2404298   6242162  260.59  334.28  320.27  307.40  299.37  290.27
     7   2419801   6222511  258.82  341.25  318.50  307.40  299.37  288.81
     8   2430547   6213193  259.41  340.23  316.74  306.57  297.81  288.81
     9   2438328   6207418  257.66  338.23  317.61  304.94  297.04  287.36
    10   2444184   6203576  259.41  339.23  317.61  305.76  297.04  288.09
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 英語版 Wikipedia タイトル ==

{{{
$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | head -100000 | tail -5
1990–91_Yemeni_League
1990–91_Yugoslav_Cup
1990–91_Yugoslav_First_League
1990–91_in_Argentine_football
1990–91_in_English_football

$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 8279325
total length: 158943710
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1  11300640  58868000  206.93  796.86  719.32  649.36  619.71  553.43
     2  13972659  45085494  192.32  412.73  386.16  362.97  354.42  329.72
     3  14661731  42852635  189.89  373.78  349.34  330.38  324.42  302.94
     4  14917808  42167796  189.20  366.02  342.83  323.79  318.07  297.60
     5  15037450  41917068  188.81  361.38  339.32  319.79  314.80  294.64
     6  15102918  41806112  188.51  361.70  339.59  319.91  314.80  294.85
     7  15142922  41758284  188.29  360.28  338.07  319.30  313.61  293.59
     8  15169309  41728494  188.25  359.50  337.38  318.56  312.90  293.28
     9  15187703  41714075  188.29  340.71  336.97  318.93  313.61  293.59
    10  15201062  41703563  188.21  358.72  336.69  318.07  312.31  291.83
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 日本語ウェブコーパス ==

{{{
$ wget http://dist.s-yata.jp/corpus/nwc2010/ngrams/word/over999/7gms/7gm-0000.xz

$ xz -cd 7gm-0000.xz | head -5
" " 東京 都 "” で の	10480
" " 東京 都 "” を キーワード	9271
" ( ソーシャルブックマーク と は ) </S>	27592
" ( ダブル クォーテーション ) を つける	7460
" - レビュー を すべて 見る </S>	1082

$ xz -cd 7gm-0000.xz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 1023609
total length: 40778650
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1663207  19978399  216.41  559.35  559.35  522.25  535.92  535.92
     2   2490785  12410297  177.40  231.59  229.00  223.50  223.50  223.01
     3   2925488  10356372  163.78  180.53  176.18  172.62  172.91  172.62
     4   3150161   9487065  158.70  165.10  160.69  157.72  157.96  157.96
     5   3258557   9169432  156.52  160.44  156.04  152.55  153.23  153.23
     6   3312602   9041163  155.33  157.96  153.23  150.09  150.97  150.53
     7   3341089   8986792  155.09  156.75  151.87  149.43  149.65  149.21
     8   3356920   8959303  154.86  157.00  152.55  149.65  149.87  150.09
     9   3366391   8946219  154.62  157.00  152.55  147.28  149.21  150.31
    10   3372327   8939927  154.86  156.04  151.65  148.56  149.00  149.21
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !MeCab 用 IPA 辞書 ==

{{{
$ tar zxf mecab-ipadic-2.7.0-20070801.tar.gz

$ head -5 mecab-ipadic-2.7.0-20070801/Noun.csv | iconv -f euc-jp -t utf-8
仕舞い,1285,1285,5543,名詞,一般,*,*,*,*,仕舞い,シマイ,シマイ
綺,1285,1285,5622,名詞,一般,*,*,*,*,綺,アヤギヌ,アヤギヌ
洋裁,1285,1285,5618,名詞,一般,*,*,*,*,洋裁,ヨウサイ,ヨーサイ
組打ち,1285,1285,5622,名詞,一般,*,*,*,*,組打ち,クミウチ,クミウチ
畿内,1285,1285,5770,名詞,一般,*,*,*,*,畿内,キナイ,キナイ

$ marisa-benchmark mecab-ipadic-2.7.0-20070801/*.csv
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 392126
total length: 30775421
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    568175  30078242  186.73  642.83  576.66  552.29  529.90  537.16
     2   1183728  22534836  123.70  290.46  272.31  268.58  263.17  264.95
     3   1730237  15988234  101.06  166.86  155.61  152.58  151.40  152.58
     4   2050722  13197229   94.04  113.99  105.41  104.29  103.74  104.29
     5   2262289  11821975   88.92   88.32   83.43   82.55   82.55   82.55
     6   2418108  10385228   85.80   79.38   73.57   72.75   72.75   72.89
     7   2528235   8996823   83.97   72.89   67.61   66.92   66.92   67.14
     8   2594671   8403026   82.90   68.55   63.76   63.14   63.25   63.55
     9   2638735   8073878   82.21   65.03   60.33   60.05   60.05   59.96
    10   2670115   7830806   81.86   62.54   58.09   57.75   57.92   57.84
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !WordNet 3.0 ==

{{{
$ tar zxf WordNet-3.0.tar.gz

$ grep '^[^ ]' WordNet-3.0/dict/data.noun | head -5
00001740 03 n 01 entity 0 003 ~ 00001930 n 0000 ~ 00002137 n 0000 ~ 04424418...
00001930 03 n 01 physical_entity 0 007 @ 00001740 n 0000 ~ 00002452 n 0000...
00002137 03 n 02 abstraction 0 abstract_entity 0 010 @ 00001740 n 0000...
00002452 03 n 01 thing 0 009 @ 00001930 n 0000 ~ 04347225 n 0000 ~ 09225146...
00002684 03 n 02 object 0 physical_object 0 039 @ 00001930 n 0000 + 00532607...

$ grep '^[^ ]' WordNet-3.0/dict/data.* | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 117659
total length: 24775316
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    142461  21629302  125.17  511.56  619.26  588.29  588.29  588.29
     2    324198  20612961   97.24  280.14  309.63  294.15  301.69  294.15
     3    509372  20053304   80.59  170.52  175.61  175.61  173.03  175.61
     4    690338  19553339   68.41  126.52  125.17  123.85  125.17  125.17
     5    869714  19063875   61.28  102.31   97.24   99.71   99.71   99.71
     6   1048162  18589107   54.22   83.45   81.71   81.14   81.14   81.14
     7   1225631  18117922   49.23   72.63   69.21   69.21   69.21   69.21
     8   1401536  17651552   44.91   62.92   59.73   59.13   59.73   59.73
     9   1575331  17197805   41.00   55.24   52.53   52.53   52.06   52.29
    10   1745710  16759686   38.45   49.23   46.32   45.96   46.32   46.32
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}
