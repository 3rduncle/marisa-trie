#summary ベンチマーク
#labels Featured

= ベンチマーク =

いくつかのキー集合に対して，`marisa-benchmark` を実行してみました．実行環境は以下のとおりです．

|| *CPU*        || Core 2 Duo U9600 1.60GHz    ||
|| *OS*         || 64-bit Ubuntu Desktop 10.04 ||
|| *コンパイラ* || gcc version 4.4.3           ||

 * version: 0.1.0

<wiki:toc max_depth="2" />

----

== 英語版 Wikipedia タイトル ==

{{{
$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | head -100000 | tail -5
1990–91_Yemeni_League
1990–91_Yugoslav_Cup
1990–91_Yugoslav_First_League
1990–91_in_Argentine_football
1990–91_in_English_football

$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
#keys: 8279325
total length: 158943710
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1  11300640  58868000  206.62  799.93  712.51  644.31  609.22  359.81
     2  13972659  45085494  192.86  413.14  383.12  358.57  347.43  122.35
     3  14661731  42852635  190.37  374.46  349.63  328.68  319.79  107.04
     4  14917808  42167796  189.72  365.86  341.84  321.40  313.02  103.54
     5  15037450  41917068  189.24  364.89  339.32  317.58  310.55  101.75
     6  15102918  41806112  188.85  363.45  337.79  317.58  309.16  101.80
     7  15142922  41758284  187.95  361.86  336.56  316.25  308.81  101.28
     8  15169309  41728494  188.55  362.33  336.28  316.13  308.58  101.40
     9  15187703  41714075  188.72  362.33  336.01  316.49  308.35  100.93
    10  15201062  41703563  188.72  362.97  336.28  316.85  308.81  101.28
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !WordNet 3.0 ==

{{{
$ tar zxf WordNet-3.0.tar.gz

$ grep '^[^ ]' WordNet-3.0/dict/data.noun | head -5
00001740 03 n 01 entity 0 003 ~ 00001930 n 0000 ~ 00002137 n 0000 ~ 04424418...
00001930 03 n 01 physical_entity 0 007 @ 00001740 n 0000 ~ 00002452 n 0000...
00002137 03 n 02 abstraction 0 abstract_entity 0 010 @ 00001740 n 0000...
00002452 03 n 01 thing 0 009 @ 00001930 n 0000 ~ 04347225 n 0000 ~ 09225146...
00002684 03 n 02 object 0 physical_object 0 039 @ 00001930 n 0000 + 00532607...

$ grep '^[^ ]' WordNet-3.0/dict/data.* | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
#keys: 117659
total length: 26893178
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    142461  21629320  113.13  490.25  619.26  560.28  588.29  490.25
     2    324198  20612979   89.82  273.63  301.69  294.15  286.97  267.41
     3    509372  20053322   74.47  170.52  175.61  173.03  170.52  165.72
     4    690338  19553357   65.00  123.85  125.17  123.85  123.85  117.66
     5    869714  19063893   57.96   98.87   99.71   98.87   98.87   94.89
     6   1048162  18589125   51.60   84.04   81.71   81.14   80.04   77.92
     7   1225631  18117940   47.06   71.74   69.21   68.41   68.41   66.47
     8   1401536  17651570   43.42   62.92   59.73   59.42   59.73   57.68
     9   1575331  17197823   39.48   54.98   52.06   51.60   52.06   50.07
    10   1745710  16759704   37.00   48.62   45.08   45.60   45.60   44.57
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 日本語版 Wikipedia タイトル ==

{{{
$ gzip -cd jawiki-20101102-all-titles-in-ns0.gz | head -10000 | tail -5
2006年の日本
2006年の日本グランプリ_(ロードレース)
2006年の日本シリーズ
2006年の日本プロ野球
2006年の日本公開映画

$ gzip -cd jawiki-20101102-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
#keys: 1146584
total length: 23809474
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1564294   9850414  301.73  790.75  707.77  658.96  613.15  453.20
     2   2087639   7056713  276.95  416.94  388.67  368.68  349.57  185.83
     3   2264302   6522559  266.65  363.99  338.23  322.98  312.42  153.08
     4   2340155   6348953  265.41  351.71  324.81  310.73  298.59  145.14
     5   2380365   6275198  261.18  347.45  321.17  308.22  298.59  143.14
     6   2404298   6242162  262.98  342.26  319.38  304.94  295.51  141.03
     7   2419801   6222511  260.59  340.23  318.50  304.94  294.75  140.69
     8   2430547   6213193  261.78  341.25  315.86  303.33  294.00  139.83
     9   2438328   6207418  258.82  340.23  315.86  302.53  294.75  139.66
    10   2444184   6203576  261.78  340.23  315.86  302.53  292.50  138.81
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !MeCab 用 IPA 辞書 ==

{{{
$ tar zxf mecab-ipadic-2.7.0-20070801.tar.gz

$ head -5 mecab-ipadic-2.7.0-20070801/Noun.csv | iconv -f euc-jp -t utf-8
仕舞い,1285,1285,5543,名詞,一般,*,*,*,*,仕舞い,シマイ,シマイ
綺,1285,1285,5622,名詞,一般,*,*,*,*,綺,アヤギヌ,アヤギヌ
洋裁,1285,1285,5618,名詞,一般,*,*,*,*,洋裁,ヨウサイ,ヨーサイ
組打ち,1285,1285,5622,名詞,一般,*,*,*,*,組打ち,クミウチ,クミウチ
畿内,1285,1285,5770,名詞,一般,*,*,*,*,畿内,キナイ,キナイ

$ marisa-benchmark mecab-ipadic-2.7.0-20070801/*.csv
#tries: 1 - 10
trie: patricia
tail: text
order: weight
#keys: 392126
total length: 30775421
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    568175  30078242  188.52  642.83  576.66  552.29  544.62  496.36
     2   1183728  22534836  125.28  292.63  276.15  272.31  266.75  256.29
     3   1730237  15988234  101.85  167.58  154.99  152.58  151.40  146.86
     4   2050722  13197229   95.18  114.32  105.69  104.29  104.29  101.85
     5   2262289  11821975   90.14   88.52   83.43   82.90   82.90   80.85
     6   2418108  10385228   85.80   79.22   73.43   71.82   72.48   71.95
     7   2528235   8996823   84.51   72.89   67.38   67.14   66.92   65.79
     8   2594671   8403026   83.79   68.31   63.66   63.04   63.25   61.95
     9   2638735   8073878   83.08   65.14   60.79   60.33   60.05   59.23
    10   2670115   7830806   82.38   62.64   58.44   58.27   57.92   57.08
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 日本語ウェブコーパス ==

{{{
$ wget http://dist.s-yata.jp/corpus/nwc2010/ngrams/word/over999/7gms/7gm-0000.xz

$ xz -cd 7gm-0000.xz | head -5
" " 東京 都 "” で の	10480
" " 東京 都 "” を キーワード	9271
" ( ソーシャルブックマーク と は ) </S>	27592
" ( ダブル クォーテーション ) を つける	7460
" - レビュー を すべて 見る </S>	1082

$ xz -cd 7gm-0000.xz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
#keys: 1023609
total length: 40778650
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1663207  19978399  220.13  562.42  559.35  519.60  530.37  485.12
     2   2490785  12410297  180.21  233.17  229.00  223.01  222.04  212.37
     3   2925488  10356372  166.98  178.64  175.88  171.17  172.04  165.36
     4   3150161   9487065  161.71  165.63  160.19  156.75  157.24  151.65
     5   3258557   9169432  158.95  157.96  155.80  152.10  153.01  147.07
     6   3312602   9041163  158.45  158.45  153.01  149.87  149.65  144.37
     7   3341089   8986792  157.48  157.24  151.87  148.35  149.43  143.77
     8   3356920   8959303  157.72  156.28  151.20  147.92  148.56  142.96
     9   3366391   8946219  157.48  156.75  150.09  146.65  147.49  143.16
    10   3372327   8939927  157.72  156.28  150.97  147.49  148.78  142.76
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

