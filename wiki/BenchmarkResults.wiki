#summary ベンチマーク
#labels Featured

<wiki:toc max_depth="2" />

= ベンチマーク =

いくつかのキー集合に対して，`marisa-benchmark` を実行してみました．実行環境は以下のとおりです．

|| *CPU*        || Core 2 Duo U9600 1.60GHz    ||
|| *OS*         || 64-bit Ubuntu Desktop 10.04 ||
|| *コンパイラ* || gcc version 4.4.3           ||

== 英語版 Wikipedia タイトル ==

{{{
$ gzip -cd enwiki-20100622-all-titles-in-ns0.gz | head -100000 | tail -5
1996–97_Libyan_Premier_League
1996–97_Liga_Artzit
1996–97_Liga_Indonesia
1996–97_Liga_Leumit
1996–97_Los_Angeles_Kings_season

$ gzip -cd enwiki-20100622-all-titles-in-ns0.gz | marisa-benchmark
max. #tries: 10
patricia: on
tail: on
weight order: on
#keys: 7645650
total length: 145189630
------+--------+---------+-------+-------+-------+-------+-------+-------
#tries   #nodes      size   build restore  lookup    find predict predict
                                                          breadth   depth
                  [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+--------+---------+-------+-------+-------+-------+-------+-------
     1 10425397  54719250  220.15  812.50  714.55  649.59  588.13  361.15
     2 12950076  41857953  203.45  410.61  382.47  360.98  343.16  124.73
     3 13608229  39745224  200.04  379.25  349.60  330.98  316.46  108.88
     4 13853144  39096072  199.99  369.53  341.93  324.38  310.04  105.43
     5 13967887  38857843  199.52  366.17  338.90  321.65  307.67  104.26
     6 14030610  38752480  199.37  364.25  337.41  320.57  306.56  103.68
     7 14069001  38707062  199.21  364.95  336.96  320.04  305.83  103.47
     8 14094304  38678858  199.26  364.60  336.66  320.04  305.58  103.39
     9 14112036  38665236  199.05  364.25  336.22  318.97  305.22  103.21
    10 14124782  38655298  199.11  363.73  336.07  318.70  304.49  103.28
------+--------+---------+-------+-------+-------+-------+-------+-------
}}}

== WordNet 3.0 ==

{{{
$ tar zxf WordNet-3.0.tar.gz

$ grep '^[^ ]' WordNet-3.0/dict/data.noun | head -5
00001740 03 n 01 entity 0 003 ~ 00001930 n 0000 ~ 00002137 n 0000 ~ 04424418...
00001930 03 n 01 physical_entity 0 007 @ 00001740 n 0000 ~ 00002452 n 0000...
00002137 03 n 02 abstraction 0 abstract_entity 0 010 @ 00001740 n 0000...
00002452 03 n 01 thing 0 009 @ 00001930 n 0000 ~ 04347225 n 0000 ~ 09225146...
00002684 03 n 02 object 0 physical_object 0 039 @ 00001930 n 0000 + 00532607...

$ grep '^[^ ]' WordNet-3.0/dict/data.* | marisa-benchmark
max. #tries: 10
patricia: on
tail: on
weight order: on
#keys: 117659
total length: 24775316
------+--------+---------+-------+-------+-------+-------+-------+-------
#tries   #nodes      size   build restore  lookup    find predict predict
                                                          breadth   depth
                  [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+--------+---------+-------+-------+-------+-------+-------+-------
     1   142461  21629301  170.52  534.81  619.26  619.26  534.81  470.64
     2   324198  20612960  125.17  286.97  318.00  318.00  286.97  267.41
     3   509372  20053303  100.56  178.27  183.84  181.01  173.03  161.18
     4   690338  19553338   84.04  127.89  130.73  127.89  125.17  118.85
     5   869714  19063874   72.63  104.12  103.21  103.21   99.71   94.89
     6  1048162  18589106   64.29   85.88   84.04   83.45   81.71   78.44
     7  1225631  18117921   58.25   73.08   71.31   70.45   69.62   67.23
     8  1401536  17651551   52.29   64.29   61.60   61.28   60.03   58.25
     9  1575331  17197804   48.42   56.30   53.73   53.73   52.53   51.16
    10  1745710  16759685   44.40   50.28   47.44   47.25   47.06   45.60
------+--------+---------+-------+-------+-------+-------+-------+-------
}}}

== 日本語版 Wikipedia タイトル ==

{{{
$ gzip -cd jawiki-20101102-all-titles-in-ns0.gz | head -10000 | tail -5
2006年の日本
2006年の日本グランプリ_(ロードレース)
2006年の日本シリーズ
2006年の日本プロ野球
2006年の日本公開映画

$ gzip -cd jawiki-20101102-all-titles-in-ns0.gz | marisa-benchmark
max. #tries: 10
patricia: on
tail: on
weight order: on
#keys: 1146584
total length: 23809474
------+--------+---------+-------+-------+-------+-------+-------+-------
#tries   #nodes      size   build restore  lookup    find predict predict
                                                          breadth   depth
                  [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+--------+---------+-------+-------+-------+-------+-------+-------
     1  1564294   9850413  340.23  796.24  721.12  666.62  597.18  446.14
     2  2087639   7056712  311.57  412.44  380.92  366.32  344.32  184.34
     3  2264302   6522558  299.37  360.56  334.28  321.17  304.13  151.26
     4  2340155   6348952  296.27  348.51  322.98  309.89  294.75  143.68
     5  2380365   6275197  293.24  343.29  320.27  306.57  291.75  141.03
     6  2404298   6242161  294.75  341.25  315.86  304.13  289.54  139.32
     7  2419801   6222510  291.75  338.23  315.86  301.73  288.81  138.98
     8  2430547   6213192  292.50  338.23  313.27  303.33  287.36  137.98
     9  2438328   6207417  291.01  339.23  314.13  301.73  288.09  138.14
    10  2444184   6203575  293.24  338.23  312.42  302.53  286.65  137.98
------+--------+---------+-------+-------+-------+-------+-------+-------
}}}

== !MeCab 用 IPA 辞書 ==

{{{
$ tar zxf mecab-ipadic-2.7.0-20070801.tar.gz

$ head -5 mecab-ipadic-2.7.0-20070801/Noun.csv | iconv -f euc-jp -t utf-8
仕舞い,1285,1285,5543,名詞,一般,*,*,*,*,仕舞い,シマイ,シマイ
綺,1285,1285,5622,名詞,一般,*,*,*,*,綺,アヤギヌ,アヤギヌ
洋裁,1285,1285,5618,名詞,一般,*,*,*,*,洋裁,ヨウサイ,ヨーサイ
組打ち,1285,1285,5622,名詞,一般,*,*,*,*,組打ち,クミウチ,クミウチ
畿内,1285,1285,5770,名詞,一般,*,*,*,*,畿内,キナイ,キナイ

$ marisa-benchmark mecab-ipadic-2.7.0-20070801/*.csv
max. #tries: 10
patricia: on
tail: on
weight order: on
#keys: 392126
total length: 30775421
------+--------+---------+-------+-------+-------+-------+-------+-------
#tries   #nodes      size   build restore  lookup    find predict predict
                                                          breadth   depth
                  [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+--------+---------+-------+-------+-------+-------+-------+-------
     1   568175  30078241  236.22  664.62  594.13  576.66  529.90  484.11
     2  1183728  22534835  147.42  308.76  286.22  280.09  266.75  252.98
     3  1730237  15988233  116.01  171.99  159.40  158.76  153.77  148.53
     4  2050722  13197228  107.43  116.36  107.73  107.43  105.13  102.12
     5  2262289  11821974  100.80   92.05   85.99   85.06   83.79   81.69
     6  2418108  10385227   97.30   80.35   74.69   74.98   74.13   72.35
     7  2528235   8996822   94.49   73.71   68.67   68.67   68.08   66.57
     8  2594671   8403025   93.59   69.16   64.49   64.60   64.07   62.64
     9  2638735   8073877   92.92   65.79   61.37   61.56   61.17   59.78
    10  2670115   7830805   92.05   63.25   59.06   59.06   58.88   57.50
------+--------+---------+-------+-------+-------+-------+-------+-------
}}}