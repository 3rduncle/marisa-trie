#summary ベンチマーク
#labels Featured

= ベンチマーク =

いくつかのキー集合に対して，`marisa-benchmark` を実行してみました．実行環境は以下のとおりです．

|| *CPU*        || Core 2 Duo U9600 1.60GHz    ||
|| *OS*         || 64-bit Ubuntu Desktop 10.04 ||
|| *コンパイラ* || gcc version 4.4.3           ||

 * version: 0.1.2

<wiki:toc max_depth="2" />

----

== 日本語版 Wikipedia タイトル ==

{{{
$ gzip -cd jawiki-20110129-all-titles-in-ns0.gz | head -10000 | tail -5
2005年のオーストラリアグランプリ_(ロードレース)
2005年のオールスターゲーム_(日本プロ野球)
2005年のカタルーニャグランプリ
2005年のカタールグランプリ
2005年のサッカー

$ gzip -cd jawiki-20110129-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 1174430
total length: 24438317
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1602151  10074222  309.88 1118.50  947.12  857.25  821.28  757.70
     2   2136398   7355508  282.31  631.41  578.54  546.25  531.42  504.05
     3   2316597   6806033  272.49  553.98  515.10  487.32  475.48  444.86
     4   2394139   6626710  269.98  529.02  501.89  473.56  462.37  439.86
     5   2435290   6549380  266.92  529.02  495.54  466.04  455.21  436.59
     6   2459699   6515022  267.52  526.65  487.32  464.20  451.70  430.19
     7   2475537   6494648  266.31  521.97  487.32  458.76  449.97  428.62
     8   2486556   6484968  266.31  521.97  477.41  460.56  449.97  428.62
     9   2494580   6478825  263.92  519.66  485.30  458.76  448.26  428.62
    10   2500585   6474487  266.31  524.30  485.30  458.76  449.97  428.62
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 英語版 Wikipedia タイトル ==

{{{
$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | head -100000 | tail -5
1990–91_Yemeni_League
1990–91_Yugoslav_Cup
1990–91_Yugoslav_First_League
1990–91_in_Argentine_football
1990–91_in_English_football

$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 8279325
total length: 158943710
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1  11300640  58756132  209.92 1141.98  872.43  722.45  723.09  608.77
     2  13972659  44931886  178.70  603.01  555.66  507.00  505.76  453.91
     3  14661731  42688271  192.99  543.98  509.50  468.29  467.49  422.63
     4  14917808  41999440  192.14  534.84  497.26  457.67  456.92  413.76
     5  15037450  41746856  191.74  533.46  494.88  455.41  454.91  411.91
     6  15102918  41634888  191.34  525.00  489.61  450.94  450.70  408.25
     7  15142922  41586444  191.30  525.00  489.61  449.96  450.45  407.85
     8  15169309  41556250  191.21  525.34  489.32  449.47  449.96  407.85
     9  15187703  41541555  191.12  525.00  488.74  449.96  449.47  407.45
    10  15201062  41530843  191.21  524.01  488.17  450.45  449.23  407.25
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 日本語ウェブコーパス ==

{{{
$ wget http://dist.s-yata.jp/corpus/nwc2010/ngrams/word/over999/7gms/7gm-0000.xz

$ xz -cd 7gm-0000.xz | head -5
" " 東京 都 "” で の	10480
" " 東京 都 "” を キーワード	9271
" ( ソーシャルブックマーク と は ) </S>	27592
" ( ダブル クォーテーション ) を つける	7460
" - レビュー を すべて 見る </S>	1082

$ xz -cd 7gm-0000.xz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 1023609
total length: 40778650
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1663207  19960427  224.48  781.38  752.65  715.81  725.96  725.96
     2   2490785  12379405  182.14  331.27  345.81  333.42  335.61  337.82
     3   2925488  10318696  169.47  263.14  269.37  260.46  263.14  265.18
     4   3150161   9445889  164.30  238.60  246.65  240.28  241.99  243.72
     5   3258557   9126576  161.71  235.85  239.16  232.11  234.77  235.31
     6   3312602   8997471  160.94  233.70  236.40  229.51  232.11  233.17
     7   3341089   8942668  160.44  231.59  234.24  227.98  230.02  231.06
     8   3356920   8914943  159.94  232.11  234.24  227.98  230.02  231.59
     9   3366391   8901719  160.19  231.06  233.70  227.47  229.00  230.02
    10   3372327   8895343  159.94  230.54  233.17  226.96  229.00  230.02
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !MeCab 用 IPA 辞書 ==

{{{
$ tar zxf mecab-ipadic-2.7.0-20070801.tar.gz

$ head -5 mecab-ipadic-2.7.0-20070801/Noun.csv | iconv -f euc-jp -t utf-8
仕舞い,1285,1285,5543,名詞,一般,*,*,*,*,仕舞い,シマイ,シマイ
綺,1285,1285,5622,名詞,一般,*,*,*,*,綺,アヤギヌ,アヤギヌ
洋裁,1285,1285,5618,名詞,一般,*,*,*,*,洋裁,ヨウサイ,ヨーサイ
組打ち,1285,1285,5622,名詞,一般,*,*,*,*,組打ち,クミウチ,クミウチ
畿内,1285,1285,5770,名詞,一般,*,*,*,*,畿内,キナイ,キナイ

$ marisa-benchmark mecab-ipadic-2.7.0-20070801/*.csv
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 392126
total length: 30775421
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    568175  30072450  190.35  784.25  664.62  642.83  622.42  622.42
     2   1183728  22519436  127.73  384.44  347.01  338.04  329.52  332.31
     3   1730237  15964306  104.01  227.98  209.69  205.30  202.13  204.23
     4   2050722  13168305   97.54  157.48  147.42  145.77  144.70  144.70
     5   2262289  11789755   91.83  128.57  120.28  119.19  118.11  118.83
     6   2418108  10350580   88.52  113.99  107.43  106.27  105.41  105.98
     7   2528235   8960459   86.37  104.85   98.77   98.03   97.30   97.30
     8   2594671   8365638   85.43   98.03   92.92   92.05   91.62   91.62
     9   2638735   8035810   84.88   94.04   88.92   88.52   87.72   88.12
    10   2670115   7792258   83.97   90.98   86.18   85.62   85.06   85.24
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !WordNet 3.0 ==

{{{
$ tar zxf WordNet-3.0.tar.gz

$ grep '^[^ ]' WordNet-3.0/dict/data.noun | head -5
00001740 03 n 01 entity 0 003 ~ 00001930 n 0000 ~ 00002137 n 0000 ~ 04424418...
00001930 03 n 01 physical_entity 0 007 @ 00001740 n 0000 ~ 00002452 n 0000...
00002137 03 n 02 abstraction 0 abstract_entity 0 010 @ 00001740 n 0000...
00002452 03 n 01 thing 0 009 @ 00001930 n 0000 ~ 04347225 n 0000 ~ 09225146...
00002684 03 n 02 object 0 physical_object 0 039 @ 00001930 n 0000 + 00532607...

$ grep '^[^ ]' WordNet-3.0/dict/data.* | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 117659
total length: 24775316
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    142461  21628018  126.52  619.26  692.11  653.66  692.11  653.66
     2    324198  20608849   98.87  346.06  379.55  379.55  379.55  367.68
     3    509372  20046308   81.71  226.27  245.12  235.32  240.12  240.12
     4    690338  19543527   70.04  173.03  181.01  175.61  178.27  178.27
     5    869714  19051271   62.25  141.76  143.49  143.49  141.76  143.49
     6   1048162  18573723   55.50  117.66  117.66  115.35  116.49  116.49
     7   1225631  18099778   50.28   98.87   98.87   97.24   98.05   98.05
     8   1401536  17630668   46.14   87.15   84.65   84.65   84.04   84.65
     9   1575331  17174213   42.02   76.40   74.47   73.54   73.54   74.00
    10   1745710  16733446   39.48   67.62   65.00   65.00   64.65   65.00
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}
