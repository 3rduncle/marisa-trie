#summary ベンチマーク
#labels Featured

= ベンチマーク =

いくつかのキー集合に対して，`marisa-benchmark` を実行してみました．実行環境は以下のとおりです．

|| *CPU*        || Core 2 Duo U9600 1.60GHz    ||
|| *OS*         || 64-bit Ubuntu Desktop 10.04 ||
|| *コンパイラ* || gcc version 4.4.3           ||

 * version: 0.1.3

<wiki:toc max_depth="2" />

----

== 日本語版 Wikipedia タイトル ==

{{{
$ gzip -cd jawiki-20110129-all-titles-in-ns0.gz | head -10000 | tail -5
2005年のオーストラリアグランプリ_(ロードレース)
2005年のオールスターゲーム_(日本プロ野球)
2005年のカタルーニャグランプリ
2005年のカタールグランプリ
2005年のサッカー

$ gzip -cd jawiki-20110129-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 1174430
total length: 24438317
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1602151  10074222  305.05 1129.26 1003.79  910.41  869.95  804.40
     2   2136398   7355508  278.30  628.04  599.20  551.38  546.25  510.62
     3   2316597   6806033  266.92  556.60  531.42  497.64  487.32  458.76
     4   2394139   6626710  265.71  533.83  512.85  481.32  469.77  444.86
     5   2435290   6549380  262.15  531.42  506.22  475.48  467.90  439.86
     6   2459699   6515022  264.51  524.30  501.89  469.77  462.37  434.97
     7   2475537   6494648  260.41  519.66  499.76  467.90  462.37  433.37
     8   2486556   6484968  262.74  519.66  499.76  469.77  458.76  433.37
     9   2494580   6478825  258.69  519.66  497.64  467.90  460.56  430.19
    10   2500585   6474487  262.74  515.10  497.64  467.90  458.76  433.37
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 英語版 Wikipedia タイトル ==

{{{
$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | head -100000 | tail -5
1990–91_Yemeni_League
1990–91_Yugoslav_Cup
1990–91_Yugoslav_First_League
1990–91_in_Argentine_football
1990–91_in_English_football

$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 8279325
total length: 158943710
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1  11300640  58756132  209.50 1141.98  969.48  849.16  834.61  703.43
     2  13972659  44931886  194.26  602.13  563.60  514.88  508.87  454.16
     3  14661731  42688271  191.96  547.21  512.65  471.22  466.97  417.94
     4  14917808  41999440  190.86  525.34  503.30  462.79  457.93  412.73
     5  15037450  41746856  190.33  533.12  498.45  458.94  454.16  409.87
     6  15102918  41634888  189.59  528.02  494.29  454.16  448.99  406.65
     7  15142922  41586444  190.68  523.35  492.23  452.67  447.77  404.66
     8  15169309  41556250  190.59  523.35  489.32  451.93  445.84  403.87
     9  15187703  41541555  190.59  523.01  488.74  449.23  443.93  403.08
    10  15201062  41530843  190.50  525.00  491.94  450.94  442.27  402.10
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 日本語ウェブコーパス ==

{{{
$ wget http://dist.s-yata.jp/corpus/nwc2010/ngrams/word/over999/7gms/7gm-0000.xz

$ xz -cd 7gm-0000.xz | head -5
" " 東京 都 "” で の	10480
" " 東京 都 "” を キーワード	9271
" ( ソーシャルブックマーク と は ) </S>	27592
" ( ダブル クォーテーション ) を つける	7460
" - レビュー を すべて 見る </S>	1082

$ xz -cd 7gm-0000.xz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 1023609
total length: 40778650
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1663207  19960427  221.56  775.46  787.39  741.75  752.65  763.89
     2   2490785  12379405  179.58  331.27  350.55  335.61  338.94  337.82
     3   2925488  10318696  166.98  263.82  272.24  263.82  264.50  264.50
     4   3150161   9445889  161.96  243.14  250.27  242.56  243.72  243.14
     5   3258557   9126576  159.19  235.85  243.14  235.85  236.40  236.40
     6   3312602   8997471  158.21  232.64  238.05  230.54  232.11  232.11
     7   3341089   8942668  157.96  231.59  236.40  230.02  231.06  231.06
     8   3356920   8914943  157.48  227.98  235.85  228.48  230.02  230.02
     9   3366391   8901719  157.24  227.98  233.70  226.46  227.47  227.98
    10   3372327   8895343  157.72  225.46  235.31  229.00  229.00  230.02
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !MeCab 用 IPA 辞書 ==

{{{
$ tar zxf mecab-ipadic-2.7.0-20070801.tar.gz

$ head -5 mecab-ipadic-2.7.0-20070801/Noun.csv | iconv -f euc-jp -t utf-8
仕舞い,1285,1285,5543,名詞,一般,*,*,*,*,仕舞い,シマイ,シマイ
綺,1285,1285,5622,名詞,一般,*,*,*,*,綺,アヤギヌ,アヤギヌ
洋裁,1285,1285,5618,名詞,一般,*,*,*,*,洋裁,ヨウサイ,ヨーサイ
組打ち,1285,1285,5622,名詞,一般,*,*,*,*,組打ち,クミウチ,クミウチ
畿内,1285,1285,5770,名詞,一般,*,*,*,*,畿内,キナイ,キナイ

$ marisa-benchmark mecab-ipadic-2.7.0-20070801/*.csv
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 392126
total length: 30775421
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    568175  30072450  186.73  800.26  700.22  653.54  642.83  642.83
     2   1183728  22519436  125.68  388.24  350.11  343.97  335.15  335.15
     3   1730237  15964306  102.12  226.66  209.69  206.38  194.12  201.09
     4   2050722  13168305   95.41  157.48  145.77  145.77  143.64  143.64
     5   2262289  11789755   90.35  125.68  118.47  117.05  116.36  116.01
     6   2418108  10350580   86.95  112.04  106.56  105.13  104.29  104.29
     7   2528235   8960459   84.88  103.46   97.79   96.58   95.87   95.87
     8   2594671   8365638   83.97   97.06   91.83   90.98   90.14   90.14
     9   2638735   8035810   83.25   93.14   88.32   87.53   86.75   86.75
    10   2670115   7792258   82.90   89.73   85.43   84.33   83.43   83.79
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !WordNet 3.0 ==

{{{
$ tar zxf WordNet-3.0.tar.gz

$ grep '^[^ ]' WordNet-3.0/dict/data.noun | head -5
00001740 03 n 01 entity 0 003 ~ 00001930 n 0000 ~ 00002137 n 0000 ~ 04424418...
00001930 03 n 01 physical_entity 0 007 @ 00001740 n 0000 ~ 00002452 n 0000...
00002137 03 n 02 abstraction 0 abstract_entity 0 010 @ 00001740 n 0000...
00002452 03 n 01 thing 0 009 @ 00001930 n 0000 ~ 04347225 n 0000 ~ 09225146...
00002684 03 n 02 object 0 physical_object 0 039 @ 00001930 n 0000 + 00532607...

$ grep '^[^ ]' WordNet-3.0/dict/data.* | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 117659
total length: 24775316
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    142461  21628018  123.85  619.26  735.37  692.11  692.11  692.11
     2    324198  20608849   97.24  356.54  392.20  379.55  392.20  379.55
     3    509372  20046308   80.59  226.27  250.34  240.12  245.12  240.12
     4    690338  19543527   68.41  173.03  181.01  178.27  181.01  178.27
     5    869714  19051271   61.28  141.76  145.26  145.26  141.76  143.49
     6   1048162  18573723   54.47  116.49  117.66  115.35  116.49  117.66
     7   1225631  18099778   49.23   98.05   99.71   98.05   97.24   98.05
     8   1401536  17630668   45.08   87.15   85.26   84.65   84.04   84.04
     9   1575331  17174213   41.14   76.40   74.47   74.00   73.54   74.00
    10   1745710  16733446   38.58   67.23   64.65   64.29   62.92   61.93
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}
