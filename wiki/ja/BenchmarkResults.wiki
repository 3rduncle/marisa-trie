#summary ベンチマーク
#labels Featured

= ベンチマーク =

いくつかのキー集合に対して，`marisa-benchmark` を実行してみました．実行環境は以下のとおりです．

|| *CPU*        || Core 2 Duo U9600 1.60GHz    ||
|| *OS*         || 64-bit Ubuntu Desktop 10.04 ||
|| *コンパイラ* || gcc version 4.4.3           ||

 * version: 0.1.1

<wiki:toc max_depth="2" />

----

== 日本語版 Wikipedia タイトル ==

{{{
$ gzip -cd jawiki-20110129-all-titles-in-ns0.gz | head -10000 | tail -5
2005年のオーストラリアグランプリ_(ロードレース)
2005年のオールスターゲーム_(日本プロ野球)
2005年のカタルーニャグランプリ
2005年のカタールグランプリ
2005年のサッカー

$ gzip -cd jawiki-20110129-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 1174430
total length: 24438317
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1602151  10090062  301.14  995.28  863.55  798.93  743.31  686.80
     2   2136398   7379684  274.40  538.73  495.54  467.90  451.70  428.62
     3   2316597   6833013  264.51  473.56  431.78  410.64  399.47  380.07
     4   2394139   6654894  262.15  455.21  417.95  398.11  386.33  370.48
     5   2435290   6578200  259.26  448.26  412.08  392.79  380.07  364.73
     6   2459699   6544214  260.98  446.55  409.21  391.48  380.07  363.60
     7   2475537   6524072  258.12  443.18  407.79  386.33  375.22  360.25
     8   2486556   6514552  260.41  433.37  404.98  387.60  376.42  359.15
     9   2494580   6508525  257.55  444.86  404.98  387.60  375.22  360.25
    10   2500585   6504271  259.83  443.18  406.38  386.33  375.22  360.25
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 英語版 Wikipedia タイトル ==

{{{
$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | head -100000 | tail -5
1990–91_Yemeni_League
1990–91_Yugoslav_Cup
1990–91_Yugoslav_First_League
1990–91_in_Argentine_football
1990–91_in_English_football

$ gzip -cd enwiki-20110115-all-titles-in-ns0.gz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 8279325
total length: 158943710
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1  11300640  58868000  207.19 1013.38  870.59  777.40  745.89  638.84
     2  13972659  45085494  192.23  529.71  489.61  453.66  442.74  402.30
     3  14661731  42852635  190.33  484.45  445.36  415.63  406.05  371.44
     4  14917808  42167796  189.28  473.65  434.84  406.25  397.47  363.93
     5  15037450  41917068  188.81  468.55  430.99  402.30  393.69  360.60
     6  15102918  41806112  188.55  464.35  428.98  400.74  392.39  359.50
     7  15142922  41758284  188.42  464.87  426.55  398.62  390.35  357.95
     8  15169309  41728494  188.29  462.53  426.99  398.04  390.53  357.95
     9  15187703  41714075  188.21  463.31  426.99  398.81  390.53  358.26
    10  15201062  41703563  188.25  463.05  424.58  398.24  389.98  356.87
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== 日本語ウェブコーパス ==

{{{
$ wget http://dist.s-yata.jp/corpus/nwc2010/ngrams/word/over999/7gms/7gm-0000.xz

$ xz -cd 7gm-0000.xz | head -5
" " 東京 都 "” で の	10480
" " 東京 都 "” を キーワード	9271
" ( ソーシャルブックマーク と は ) </S>	27592
" ( ダブル クォーテーション ) を つける	7460
" - レビュー を すべて 見る </S>	1082

$ xz -cd 7gm-0000.xz | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 1023609
total length: 40778650
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1   1663207  19978399  217.79  696.33  696.33  656.16  660.39  656.16
     2   2490785  12410297  176.48  298.43  296.70  287.53  285.92  285.92
     3   2925488  10356372  164.30  231.59  227.98  222.04  222.04  221.56
     4   3150161   9487065  158.95  211.49  206.37  201.10  201.10  201.10
     5   3258557   9169432  156.75  205.13  202.29  197.61  197.61  197.23
     6   3312602   9041163  155.80  203.50  197.99  193.87  193.87  193.13
     7   3341089   8986792  155.33  203.50  197.61  193.50  193.50  192.77
     8   3356920   8959303  155.33  199.92  194.97  190.26  190.26  189.91
     9   3366391   8946219  155.33  201.50  196.09  192.05  192.05  191.33
    10   3372327   8939927  155.09  201.10  195.35  190.26  184.10  190.97
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !MeCab 用 IPA 辞書 ==

{{{
$ tar zxf mecab-ipadic-2.7.0-20070801.tar.gz

$ head -5 mecab-ipadic-2.7.0-20070801/Noun.csv | iconv -f euc-jp -t utf-8
仕舞い,1285,1285,5543,名詞,一般,*,*,*,*,仕舞い,シマイ,シマイ
綺,1285,1285,5622,名詞,一般,*,*,*,*,綺,アヤギヌ,アヤギヌ
洋裁,1285,1285,5618,名詞,一般,*,*,*,*,洋裁,ヨウサイ,ヨーサイ
組打ち,1285,1285,5622,名詞,一般,*,*,*,*,組打ち,クミウチ,クミウチ
畿内,1285,1285,5770,名詞,一般,*,*,*,*,畿内,キナイ,キナイ

$ marisa-benchmark mecab-ipadic-2.7.0-20070801/*.csv
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 392126
total length: 30775421
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    568175  30078242  187.62  676.08  632.46  612.70  594.13  594.13
     2   1183728  22534836  124.88  347.01  316.23  308.76  301.64  301.64
     3   1730237  15988234  101.06  198.04  184.10  181.54  178.24  178.24
     4   2050722  13197229   94.72  137.11  126.49  125.28  123.70  124.09
     5   2262289  11821975   89.32  111.08  101.85  100.55   99.02  100.03
     6   2418108  10385228   85.62   98.28   90.35   89.53   88.92   89.12
     7   2528235   8996823   83.97   89.94   82.73   82.03   81.69   81.69
     8   2594671   8403026   83.08   84.51   77.65   77.04   76.74   76.74
     9   2638735   8073878   82.38   77.96   73.71   73.16   72.75   73.02
    10   2670115   7830806   81.86   77.19   71.30   70.65   70.27   70.40
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}

----

== !WordNet 3.0 ==

{{{
$ tar zxf WordNet-3.0.tar.gz

$ grep '^[^ ]' WordNet-3.0/dict/data.noun | head -5
00001740 03 n 01 entity 0 003 ~ 00001930 n 0000 ~ 00002137 n 0000 ~ 04424418...
00001930 03 n 01 physical_entity 0 007 @ 00001740 n 0000 ~ 00002452 n 0000...
00002137 03 n 02 abstraction 0 abstract_entity 0 010 @ 00001740 n 0000...
00002452 03 n 01 thing 0 009 @ 00001930 n 0000 ~ 04347225 n 0000 ~ 09225146...
00002684 03 n 02 object 0 physical_object 0 039 @ 00001930 n 0000 + 00532607...

$ grep '^[^ ]' WordNet-3.0/dict/data.* | marisa-benchmark
#tries: 1 - 10
trie: patricia
tail: text
order: weight
predict: only IDs
#keys: 117659
total length: 24775316
------+---------+---------+-------+-------+-------+-------+-------+-------
#tries    #nodes      size   build restore  lookup    find predict predict
                                                           breadth   depth
                   [bytes]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]   [K/s]
------+---------+---------+-------+-------+-------+-------+-------+-------
     1    142461  21629302  125.17  588.29  692.11  653.66  653.66  653.66
     2    324198  20612961   98.05  326.83  356.54  356.54  346.06  346.06
     3    509372  20053304   80.59  213.93  217.89  213.93  213.93  213.93
     4    690338  19553339   69.21  156.88  156.88  154.81  156.88  154.81
     5    869714  19063875   61.28  127.89  125.17  125.17  123.85  123.85
     6   1048162  18589107   54.47  105.05  102.31  101.43  100.56  101.43
     7   1225631  18117922   49.44   89.82   85.88   84.65   85.88   84.65
     8   1401536  17651552   45.08   78.44   74.47   74.00   74.00   73.54
     9   1575331  17197805   41.14   68.41   64.65   64.29   63.95   64.29
    10   1745710  16759686   38.70   60.34   56.84   56.84   56.57   56.57
------+---------+---------+-------+-------+-------+-------+-------+-------
}}}
